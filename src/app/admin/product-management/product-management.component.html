<header class="management-header">
    <h2>Product Management</h2>
    <button class="add-button" (click)="openAddModal()">Add New Product</button>
</header>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (product of products(); track product.id) {
            <tr>
                <td>{{ product.id }}</td>
                <td>{{ product.name }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.price | currency }}</td>
                <td>{{ product.stock }}</td>
                <td>
                    <button class="edit-button" (click)="openEditModal(product)">Edit</button>
                    <button class="delete-button" (click)="deleteProduct(product.id)">Delete</button>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>

@if (isModalOpen()) {
<div class="modal-backdrop" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <h3>{{ editingProduct() ? 'Edit Product' : 'Add Product' }}</h3>
        <form [formGroup]="productForm" (ngSubmit)="saveProduct()">
            <div class="form-group">
                <label for="name">Name</label>
                <input id="name" type="text" formControlName="name" placeholder="Product Name" />
            </div>
            <div class="form-group">
                <label for="category">Category</label>
                <input id="category" type="text" formControlName="category" placeholder="Category" />
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="price">Price</label>
                    <input id="price" type="number" formControlName="price" placeholder="0.00" />
                </div>
                <div class="form-group">
                    <label for="stock">Stock</label>
                    <input id="stock" type="number" formControlName="stock" placeholder="0" />
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-outline" (click)="closeModal()">Cancel</button>
                <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">
                    {{ editingProduct() ? 'Update' : 'Create' }}
                </button>
            </div>
        </form>
    </div>
</div>
}