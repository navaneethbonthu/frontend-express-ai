<form [formGroup]="addProductForm" (ngSubmit)="onAddProduct()" class="add-product-form">
    <div class="form-group">
        <label for="productName">Product Name</label>
        <input id="productName" type="text" formControlName="name" placeholder="Enter product name" class="form-control"
            [class.is-invalid]="addProductForm.get('name')?.invalid && addProductForm.get('name')?.touched" />
        @if (addProductForm.get('name')?.invalid && addProductForm.get('name')?.touched) {
        <span class="error-message">Product name is required.</span>
        }
    </div>

    <div class="form-group">
        <label for="productPrice">Price</label>
        <div class="input-with-icon">
            <span class="currency-icon">$</span>
            <input id="productPrice" type="number" formControlName="price" placeholder="0.00" step="0.01"
                class="form-control"
                [class.is-invalid]="addProductForm.get('price')?.invalid && addProductForm.get('price')?.touched" />
        </div>
        @if (addProductForm.get('price')?.invalid && addProductForm.get('price')?.touched) {
        <span class="error-message">Price must be a positive number.</span>
        }
    </div>

    <div class="form-group">
        <label for="productCategory">Category</label>
        <select id="productCategory" formControlName="category" class="form-control"
            [class.is-invalid]="addProductForm.get('category')?.invalid && addProductForm.get('category')?.touched">
            <option value="" disabled selected hidden>Select category</option>
            @for (cat of categories(); track cat.id) {
            <option [value]="cat.id">{{ cat.name }}</option>
            }
        </select>
        @if (addProductForm.get('category')?.invalid && addProductForm.get('category')?.touched) {
        <span class="error-message">Category is required.</span>
        }
    </div>

    <div class="form-group">
        <label for="productDescription">Description</label>
        <textarea id="productDescription" formControlName="description" placeholder="Tell us about the product..."
            rows="4" class="form-control"></textarea>
    </div>

    <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="addProductForm.invalid">
            {{ editingProduct() ? 'Update Product' : 'Create Product' }}
        </button>
    </div>
</form>